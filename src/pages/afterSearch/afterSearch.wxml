<view class="container">
  <view wx:if="{{blue_deviceList.length === 0}}" class="flex flex-col h-screen">

    <view class="flex-1 flex flex-col items-center justify-center">
      <image src="http://braha.oss-cn-beijing.aliyuncs.com/app_info/images/home/search/img_sssb.png" class="w-64 h-auto" mode="widthFix"></image>

      <view wx:if="{{isNotDevice}}" class="text-center p-4">
        <view class="text-md text-gray-800 font-semibold">正在努力搜索附近设备</view>
        <view class="text-sm text-yellow-600 mt-2">查找不到设备怎么办？</view>
      </view>

      <view wx:else class="text-center p-4">
        <view class="text-md text-gray-800 font-semibold">搜索设备失败</view>
        <view class="text-sm text-yellow-600 mt-2" bind:tap="initPage">再试一次</view>
      </view>
    </view>
  </view>

  <view wx:else>
    <view class="title_panel">
      <view class="custom-navbar sticky top-0 z-50 flex items-center">
         <view class="absolute left-4" bind:tap="goBack">
            <image src="../../assets/images/back_icon_white.png" class="w-6 h-6"></image>
        </view>
      </view>
      <view class="p-10 pt-4 text-white">
        <view class="font-bold text-2xl">{{title}}</view>
        <view class="mt-2 opacity-80">共{{blue_deviceList.length}}个设备</view>
      </view>
    </view>

    <view class="p-4">
      <block wx:for="{{blue_deviceList}}" wx:key="deviceId">
        <view class="device-view flex items-center justify-between p-4 my-4">
          <view class="flex items-center">
            <image src="http://braha.oss-cn-beijing.aliyuncs.com/app_info/images/mine/img_nbt.png" class="w-20 h-auto" mode="widthFix"></image>
            <text class="ml-4 font-bold">{{item.name}}</text>
          </view>
          <view>
            <text class="text-btn px-4 py-2" bind:tap="connect_blue" data-device="{{item}}" data-index="{{index}}">{{item.state}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>